<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MPR News ChartBuilder</title>
    <link rel="stylesheet" href="css/foundation.css" />
		<!-- favicon updates through js -->
		<link id="favicon" rel="shortcut icon" type="image/png" href="" />
		
		<!-- Libraries CSS -->
		<link rel="stylesheet" href="bower_components/html5-boilerplate/css/normalize.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="bower_components/html5-boilerplate/css/main.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="bower_components/really-simple-color-picker/colorPicker.css" type="text/css" media="screen" charset="utf-8">	
			<!-- Chartbuilder CSS -->
		<link rel="stylesheet" href="css/chartbuilder.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/gneisschart.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="css/colorPicker.css" type="text/css" media="screen" charset="utf-8">
		
		<!-- iconic font -->
		<link href="open-iconic/font/css/open-iconic-foundation.css" rel="stylesheet">
		
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>
	<!-- TOP NAVBAR -->
    <div class="fixed">
		<nav class="top-bar" data-topbar>
			<ul class="title-area">
				<li class="name">
					<h1><a href="#"><img src="img/mprnewsChartbuilder.svg" alt="MPR News ChartBuilder"></a></h1>
				</li>
			</ul>
			<section class="top-bar-section">
			<!-- Left Nav Section -->
		    <ul class="left">
				<li class="has-dropdown">
					<a href="#"><strong>Navigate to:</strong></a>
					<ul class="dropdown">
						<li><a href="#">Preview Pane</a></li>
						<li><a href="#input">Input Pane</a></li>
						<li><a href="#option">Chart Options</a></li>
					</ul>
				  </li>
			</ul>
			<!-- Right Nav Section -->
				<ul class="right">
				  <li><a href="#" data-reveal-id="aboutModal">About</a></li>
				  <li><a href="https://github.com/bwareham/Chartbuilder2#faqtroubleshooting" target="_blank">FAQ</a></li>
				  <li><a href="https://github.com/bwareham/Chartbuilder2" target="_blank"><img src="img/GitHub-Mark-Light-32px.png" alt="Github logo"> Github</a></li>
				</ul>
			</section>
			<div id="aboutModal" class="reveal-modal small" data-reveal>
			<p>MPRNews Chartbuilder is a customized version of <a href="https://github.com/Quartz/Chartbuilder" target="_blank">the open-source chart-making application</a> built by the folks at <a href="http://qz.com/" target="_blank">Quartz.</a> It is optimized for the <a href="http://mprnews.org" target="_blank">MPR News</a> color scheme and typeface conventions. While the interface has been gussied up to improve usability, the chart-making guts are entirely the work of the Quartz developers and I take no credit.</p> 
			<p><strong>-Bill Wareham</strong>, MPR News senior editor</P>
			<a class="close-reveal-modal">&#215;</a>
			</div>
		</nav>
	</div>
	
	<!-- BREAK ROW -->
	<div class="row">
		<br><br>
	</div>
	
	<!-- TOP SECTION: instructions, download buttons, chart -->
    <div class="row" data-equalizer>
		<div class="large-5 columns">
			<div class="callout panel" data-equalizer-watch>
			<h1>How to make a chart:</h1>
			<h3 class="subheader"><em>Note: Requires Chrome or Firefox browser</em></h3>
			<h3><strong>Step 1</strong> Prep your data in a spreadsheet table. The first column should be either categories or dates that will populate the bottom (X) axis (or, in a bar chart, the bar labels). <em>See default data in input box for an example of how to format the table.</em> Note: a date column it must be labeled "date" in the top row to enable bottom axis options.</h3>
			<h3><strong>Step 2</strong> Paste your data table in the input box below <a href="#input"><span class="fi-arrow-circle-right"></span></a></h3>
			<h3><strong>Step 3</strong> Customize labels, title and other options <a href="#customize"><span class="fi-arrow-circle-right"></span></a></h3>
			<h3><strong>Step 4</strong> The chart in the preview pane at right should update itself as you go through steps 2 & 3. If everything looks like you want: <p><a href="#" class="tiny radius button" id="createImageButton" data-reveal-id="myModal" ><span class="fi-bar-chart"></span> Save chart</a><p></h3>
			<div class="panel">
			<h3><strong>Starting over</strong></h3><h4>Occasionally, for reasons you may not be able to figure out (e.g., a bad hidden character), the chart won't build properly - even if things look OK in the preview pane. If things have gone awry and you want to restore defaults:</h4> <a href="http://tools.bilware.info/Chartbuilder/" class="tiny radius button alert"><span class="fi-action-undo"></span> Reset</a>
			</div>
			<!-- EXPORT CHART MODAL -->
			<div id="myModal" class="reveal-modal tiny" data-reveal>
			  <p>You can either download an image (in .png format) or SVG code from which most modern browsers can render your chart image. If you don't understand <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics" target="_blank">SVG</a>, you'll want to download the .png image. </p>
			  <div id="downloadLinksDiv" class="downloadLinks">
			  <h1><a download="new_chart.png" id="downloadImageLink" class="medium radius button custom-close-reveal-modal" href="#" target="_blank"><span class="fi-data-transfer-download"></span> Download&nbsp;Image&nbsp;of&nbsp;Chart</a></h1>
			  <h1><a download="new_chart.svg" id="downloadSVGLink" class="medium radius button custom-close-reveal-modal" href="#" target="_blank"><span class="fi-data-transfer-download"></span> Download&nbsp;SVG&nbsp;of&nbsp;Chart</a></h1>
			  </div>
			  <h1><a class="medium radius alert button custom-close-reveal-modal"><span class="fi-x"></span> Don't download now</a></h1>
			  <a class="close-reveal-modal">&#215;</a>


			</div>
			</div>
		</div>
		<div class="large-7 columns">
			<div class="panel" data-equalizer-watch>
					<h2>Preview pane:</h2>
  					<div id="chartContainer"></div>
  
  					<canvas id="canvas" width="1200px" height="676px"></canvas> 
  					<canvas id="favicanvas" width="16px" height="16px"></canvas> 
					<br>
					<h5 class="subheader"><span class="fi-caret-right"></span> By default Chartbuilder creates a legend along the top of the chart, but you can click and drag the legend labels anywhere on the chart canvas. (See <a href="https://github.com/bwareham/Chartbuilder2#line-chart-w-repositioned-labels" target="_blank">example</a>.) Note #1: The color swatches will disappear. That is a feature, not a bug. Note #2: The first label move requires two clicks before you can drag. This is a bug.</h5>
			</div>
		</div>
	</div>
	
	<!-- INPUTS SECTION -->
	<div class="row">
		<a id="input"></a>
	</div>
	<div class="row">
		<br><br><br>
	</div>	
	<div class="row">
		<div class="large-12 columns">
			<h2>Step 2: Input your data </h2>
		</div>
	</div>
	<div class="row">
		<div class="large-6 columns">
			<div id="chartOptions" class="interfaceCol">
				 <div id="datainput">
					<div class="inputGroup">
					<span id="invalidDataSpan" class="hide"><span class="fi-ban"></span> Warning: Data is Invalid</span>
					<h4>Prep your data table in a spreadsheet, then copy and paste over default data the input box.</h4>
					<textarea id="csvInput" class="input-box" name="csvInput" rows="8"></textarea>
					</div>
				</div>
			</div>
		</div>
		
		<!-- 
		THE CHECK-YOUR-DATA BOX IS HIDDEN BECAUSE I FOUND IT OF LIMITED UTILITY ON THE FRONT END.
		HOWEVER, IT'S NEEDED TO GENERATE SERIES OPTIONS, SO THE CODE MUST STAY.
		-->
		<div class="large-6 columns hide">
			<div class="panel" data-equalizer-watch>
				<div class="inputGroup">
					<h4>Check the format of your data<h4>
					<div id="dataTable" class="input-box">
					  <table border=0>
						<tr><th>Header</th></tr>
						<tr><td>Data</td></tr>
					  </table>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<a id="option"></a>	
	</div>
	<div class="row">
		<div class="large-12 columns">
			<a id="customize"><h2>Step 3: Chart options</h2></a>
		</div>
	</div>
	<div class="row" data-equalizer>
		<div class="large-3 columns">
			<div class="panel" data-equalizer-watch>
				<div class="optionBlock topOptionBlock">
				  <h2>Series Options</h2>
				  <div id="seriesItems"></div>
					<h5 class="subheader"><span class="fi-caret-right"></span> Checking the box next to the series type will create a left axis based on that series, along with a new set of corresponding axis options below</h5>
					

				</div>
			</div>
		</div>
		<div class="large-3 columns">
			<div class="panel" data-equalizer-watch>
				<div class="optionBlock">
					<h2>Label Options</h2>
						<div class="optionGroup"><label for="chart_title">Title</label><input type="text" name="chart_title" value="" id="chart_title"></div>
						<div class="optionGroup"><label for="credit">Credit</label><input id="creditLine" type="text" name="credit" value="MPR News graphic"></div>
						<div class="optionGroup"><label for="source">Source</label><input id="sourceLine" type="text" name="source" value="Data: ">
						<cite>Something like "Data: Bureau of Labor Statistics" or "Data compiled by Factset"</cite></div>
				</div>
			</div>
		</div>
		<div class="large-3 columns left">
			<div class="panel" data-equalizer-watch>	
				<div class="optionBlock">
					<h2>Right Axis Options</h2>
					<div id="rightAxisControls">
						<div class="optionGroup"><label for="right_axis_prefix">Right Axis Prefix</label><input type="text" name="right_axis_prefix" value="" id="right_axis_prefix"></div>
						<div class="optionGroup"><label for="right_axis_suffix">Right Axis Suffix</label><input type="text" name="right_axis_suffix" value="" id="right_axis_suffix"></div>
						<div class="optionGroup"><label for="right_axis_tick_num">Number of Y Axis Ticks</label><select name="right_axis_tick_num" id="right_axis_tick_num" size="1">
							<option>3</option>
							<option selected >4</option>
							<option>5</option>
							<option>6</option>
							<option>7</option>
							<option>8</option>
							<option>9</option>
							<option>10</option>
						</select></div>
						<div class="optionGroup"><label for="right_axis_max">Right Axis Max</label><input type="text" name="right_axis_max" value="" id="right_axis_max"></div>
						<div class="optionGroup"><label for="right_axis_min">Right Axis Min</label><input type="text" name="right_axis_min" value="" id="right_axis_min"></div>
						<div class="optionGroup advanced"><label for="right_axis_tick_override">Right Axis Tick Override</label><input type="text" name="right_axis_tick_override" value="" id="right_axis_tick_override"></div>
					</div>
				</div>
							

			</div>

		</div>

	</div>
	<div class="row" data-equalizer>
		<div class="large-12 columns">
			<h2>Conditional options</h2>
		</div>
		<div class="large-3 columns">
			<div class="panel">
							<div class="optionBlock">
							<h2>Bottom Axis Options</h2>
							<div class="optionGroup showonlywith-date">
								<label for="x_axis_tick_date_frequency">Tick date frequency</label><select name="x_axis_tick_date_frequency" id="x_axis_tick_date_frequency" size="1">
									<option selected>auto</option>
									<option>1 hour</option>
					<option>2 hours</option>
					<option>3 hours</option>
					<option>4 hours</option>
					<option>6 hours</option>
									<option>1 day</option>
									<option>1 week</option>
									<option>1 month</option>
									<option>3 months</option>
									<option>6 months</option>
									<option>1 year</option>
									<option>5 years</option>
									<option>10 years</option>
									<option>20 years</option>
									<option>50 years</option>
									<option>100 years</option>
								   </select>
							</div>
								<div class="optionGroup showonlywith-date"><label for="x_axis_date_format">X Axis Date Format</label><select name="x_axis_date_format" id="x_axis_date_format">
									<option value="mmddyyyy">2/25/2012</option>
									<option value="ddmmyyyy">25/2/2012</option>
									<option value="mmdd">2/25</option>
									<option value="Mdd">Feb. 25</option>
					  <option value="ddM">25 Feb.</option>
									<option value="mmyy">2/13</option>
									<option value="yy">'13</option>
									<option value="yyyy">2013</option>
					  <option value="QJan">Q2 (Jan. FY)</option>
					  <option value="QJul">Q2 (July FY)</option>
									<option value="MM">February</option>
									<option selected value="M">Feb.</option>
									<option value="hmm">3:27</option>
								</select>
								</div>
				  <div class="optionGroup showonlywith-ordinal"><cite>Available only for a series labeled "date"</cite></div>
				</div>			
			</div>
		</div>
		<div class="large-3 columns left">
			<div class="panel" >
				<h2>Left Axis Options</h2>
				<cite>Available only if a left axis is created by checking box in Series Options</cite>
				<div id="leftAxisControls" class="optionBlock hide">
					<div class="optionGroup"><label for="left_axis_prefix">Left Axis Prefix</label><input type="text" name="left_axis_prefix" value="" id="left_axis_prefix"></div>
					<div class="optionGroup"><label for="left_axis_suffix">Left Axis Suffix</label><input type="text" name="left_axis_suffix" value="" id="left_axis_suffix"></div>
					<div class="optionGroup"><label for="left_axis_max">Left Axis Max</label><input type="text" name="left_axis_max" value="" id="left_axis_max"></div>
					<div class="optionGroup"><label for="left_axis_min">Left Axis Min</label><input type="text" name="left_axis_min" value="" id="left_axis_min"></div>
					<div class="optionGroup"><label for="left_axis_tick_override">Left Axis Tick Override</label><input type="text" name="left_axis_tick_override" value="" id="left_axis_tick_override" ></div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- FOOTER -->
<div class="row">
	<div class="large-12 columns">
		<div class="callout panel">
		<p>This version of Chartbuilder is designed for use by MPR News, but feel free to use it to create your own charts. (If you do you <em>must</em> change the chart credit from its default "MPR News graphic.") It is a customized version of an open source <a href="https://github.com/Quartz/Chartbuilder" target="_blank">tool developed by Quartz</a>, and all credit for its utility should go to them.</p>
		</div>
	</div>
</div>
		<script src="js/vendor/jquery.js"></script>
	
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
	<script>
	//Custom close script for buttons inside reveal-modal
	    $(document).foundation();
		$('a.custom-close-reveal-modal').click(function(){
		  $('#myModal').foundation('reveal', 'close');
		});
	</script>

    <!-- Libraries JS -->
		<script src="bower_components/modernizr/modernizr.js" charset="utf-8"></script>
		<script src="bower_components/d3/d3.v2.min.js" charset="utf-8"></script>
		<script src="bower_components/canvg/canvg.js" charset="utf-8"></script>
		<script src="bower_components/rgbcolor/index.js" charset="utf-8"></script>
		<script src="bower_components/jquery-csv/index.js" charset="utf-8"></script>
		<script src="bower_components/really-simple-color-picker/jquery.colorPicker.min.js" charset="utf-8"></script>
		<script src="bower_components/webfontloader/target/webfont.js" type="text/javascript" charset="utf-8"></script>
		<script src="bower_components/sugar/release/sugar.min.js" charset="utf-8"></script>
		
		<!-- Chartbuilder JS -->
		<script src="js/gneisschart.js" charset="utf-8"></script>
		<script src="js/chartbuilder.js"></script>
		
		<script type="text/javascript"></script>
		

			<script type="text/javascript">

		//This loads the webfonts and starts Chartbuilder once they're present
		WebFont.load({
			custom: {
				families: ["Cutive"]
			},
		    active: function(name) {
		        $(document).ready(function() {
		            ChartBuilder.start();
		        });
		    }
		});

		</script>

  </body>
</html>
